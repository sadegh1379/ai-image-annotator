{"version":3,"file":"index.js","names":["_objectSpread","React","Paper","DefaultRegionLabel","LockIcon","copyWithout","obj","newObj","_len","arguments","length","args","Array","_key","_i","_args","arg","RegionTags","_ref","regions","projectRegionBox","mouseEvents","regionClsList","regionTagList","onBeginRegionEdit","onChangeRegion","onCloseRegionEdit","onDeleteRegion","layoutParams","imageSrc","RegionEditLabel","onRegionClassAdded","allowComments","isEditable","RegionLabel","filter","r","visible","undefined","map","region","i","pbox","_layoutParams$current","current","iw","ih","margin","highlighted","type","labelBoxHeight","editingLabels","locked","tags","displayOnTop","y","coords","left","x","top","h","createElement","key","id","style","position","zIndex","bottom","backgroundColor","borderRadius","padding","paddingBottom","opacity","pointerEvents","width","height","color","onMouseDown","e","preventDefault","onMouseUp","onMouseEnter","button","Object","assign","allowedClasses","allowedTags","onOpen","onChange","onClose","onDelete","editing"],"sources":["../../src/RegionTags/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport DefaultRegionLabel from '../RegionLabel'\nimport LockIcon from '@material-ui/icons/Lock'\n\nvar copyWithout = function copyWithout(obj) {\n\tvar newObj = _objectSpread({}, obj)\n\n\tfor (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\targs[_key - 1] = arguments[_key]\n\t}\n\n\tfor (var _i = 0, _args = args; _i < _args.length; _i++) {\n\t\tvar arg = _args[_i]\n\t\tdelete newObj[arg]\n\t}\n\n\treturn newObj\n}\n\nexport var RegionTags = function RegionTags(_ref) {\n\tvar regions = _ref.regions,\n\t\tprojectRegionBox = _ref.projectRegionBox,\n\t\tmouseEvents = _ref.mouseEvents,\n\t\tregionClsList = _ref.regionClsList,\n\t\tregionTagList = _ref.regionTagList,\n\t\tonBeginRegionEdit = _ref.onBeginRegionEdit,\n\t\tonChangeRegion = _ref.onChangeRegion,\n\t\tonCloseRegionEdit = _ref.onCloseRegionEdit,\n\t\tonDeleteRegion = _ref.onDeleteRegion,\n\t\tlayoutParams = _ref.layoutParams,\n\t\timageSrc = _ref.imageSrc,\n\t\tRegionEditLabel = _ref.RegionEditLabel,\n\t\tonRegionClassAdded = _ref.onRegionClassAdded,\n\t\tallowComments = _ref.allowComments,\n\t\tisEditable = _ref.isEditable\n\n\tvar RegionLabel = RegionEditLabel != null ? RegionEditLabel : DefaultRegionLabel\n\treturn regions.filter(function (r) {\n\t\treturn r.visible || r.visible === undefined\n\t}).map(function (region, i) {\n\t\tvar pbox = projectRegionBox(region)\n\t\tvar _layoutParams$current = layoutParams.current,\n\t\t\tiw = _layoutParams$current.iw,\n\t\t\tih = _layoutParams$current.ih\n\t\tvar margin = 8\n\t\tif (region.highlighted && region.type === 'box') margin += 6\n\t\tvar labelBoxHeight = region.editingLabels && !region.locked ? 170 : region.tags ? 60 : 50\n\t\tvar displayOnTop = pbox.y > labelBoxHeight\n\t\tvar coords = displayOnTop ? {\n\t\t\tleft: pbox.x,\n\t\t\ttop: pbox.y - margin / 2\n\t\t} : {\n\t\t\tleft: pbox.x,\n\t\t\ttop: pbox.y + pbox.h + margin / 2\n\t\t}\n\n\t\tif (region.locked) {\n\t\t\treturn React.createElement('div', {\n\t\t\t\tkey: `${i}-${region.id}`,\n\t\t\t\tstyle: _objectSpread({\n\t\t\t\t\tposition: 'absolute'\n\t\t\t\t}, coords, {\n\t\t\t\t\tzIndex: 10 + (region.editingLabels ? 5 : 0)\n\t\t\t\t})\n\t\t\t}, React.createElement(Paper, {\n\t\t\t\tstyle: _objectSpread({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: 0\n\t\t\t\t}, displayOnTop ? {\n\t\t\t\t\tbottom: 0\n\t\t\t\t} : {\n\t\t\t\t\ttop: 0\n\t\t\t\t}, {\n\t\t\t\tzIndex: 10,\n\t\t\t\tbackgroundColor: '#fff',\n\t\t\t\tborderRadius: 4,\n\t\t\t\tpadding: 2,\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\topacity: 0.5,\n\t\t\t\tpointerEvents: 'none'\n\t\t\t})\n\t\t\t}, React.createElement(LockIcon, {\n\t\t\t\tstyle: {\n\t\t\t\t\twidth: 16,\n\t\t\t\t\theight: 16,\n\t\t\t\t\tcolor: '#333'\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\n\t\treturn React.createElement('div', {\n\t\t\tkey: `${i}-${region.id}`,\n\t\t\tstyle: _objectSpread({\n\t\t\t\tposition: 'absolute'\n\t\t\t}, coords, {\n\t\t\t\tzIndex: 10 + (region.editingLabels ? 5 : 0),\n\t\t\t\twidth: 200\n\t\t\t}),\n\t\t\tonMouseDown: function onMouseDown(e) {\n\t\t\t\treturn e.preventDefault()\n\t\t\t},\n\t\t\tonMouseUp: function onMouseUp(e) {\n\t\t\t\treturn e.preventDefault()\n\t\t\t},\n\t\t\tonMouseEnter: function onMouseEnter(e) {\n\t\t\t\tif (region.editingLabels) {\n\t\t\t\t\tmouseEvents.onMouseUp(e)\n\t\t\t\t\te.button = 1\n\t\t\t\t\tmouseEvents.onMouseUp(e)\n\t\t\t\t}\n\t\t\t}\n\t\t}, React.createElement('div', Object.assign({\n\t\t\tstyle: _objectSpread({\n\t\t\t\tposition: 'absolute',\n\t\t\t\tzIndex: 20,\n\t\t\t\tleft: 0\n\t\t\t}, displayOnTop ? {\n\t\t\t\tbottom: 0\n\t\t\t} : {\n\t\t\t\ttop: 0\n\t\t\t})\n\t\t}, !region.editingLabels ? copyWithout(mouseEvents, 'onMouseDown', 'onMouseUp') : {}), React.createElement(RegionLabel, {\n\t\t\tallowedClasses: regionClsList,\n\t\t\tallowedTags: regionTagList,\n\t\t\tonOpen: onBeginRegionEdit,\n\t\t\tonChange: onChangeRegion,\n\t\t\tonClose: onCloseRegionEdit,\n\t\t\tonDelete: onDeleteRegion,\n\t\t\tediting: (isEditable && region.editingLabels),\n\t\t\tregion: region,\n\t\t\tregions: regions,\n\t\t\timageSrc: imageSrc,\n\t\t\tonRegionClassAdded: onRegionClassAdded,\n\t\t\tallowComments: allowComments\n\t\t})))\n\t})\n}\nexport default RegionTags"],"mappings":"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"}