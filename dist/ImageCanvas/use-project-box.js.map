{"version":3,"file":"use-project-box.js","names":["_objectSpread","useEventCallback","getEnclosingBox","_ref","layoutParams","mat","r","_layoutParams$current","current","iw","ih","bbox","margin","type","cbox","x","y","w","h","pbox","clone","inverse","applyToPoint","a","d"],"sources":["../../src/ImageCanvas/use-project-box.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport useEventCallback from 'use-event-callback'\nimport { getEnclosingBox } from './region-tools.js'\nexport default (function (_ref) {\n\tvar layoutParams = _ref.layoutParams,\n\t\tmat = _ref.mat\n\treturn useEventCallback(function (r) {\n\t\tvar _layoutParams$current = layoutParams.current,\n\t\t\tiw = _layoutParams$current.iw,\n\t\t\tih = _layoutParams$current.ih\n\t\tvar bbox = getEnclosingBox(r)\n\t\tvar margin = r.type === 'point' ? 15 : 2\n\t\tvar cbox = {\n\t\t\tx: bbox.x * iw - margin,\n\t\t\ty: bbox.y * ih - margin,\n\t\t\tw: bbox.w * iw + margin * 2,\n\t\t\th: bbox.h * ih + margin * 2\n\t\t}\n\n\t\tvar pbox = _objectSpread({}, mat.clone().inverse().applyToPoint(cbox.x, cbox.y), {\n\t\t\tw: cbox.w / mat.a,\n\t\t\th: cbox.h / mat.d\n\t\t})\n\n\t\treturn pbox\n\t})\n})"],"mappings":"AAAA,OAAOA,aAAP,MAA0B,yCAA1B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,gBAAgB,UAAUC,IAAV,EAAgB;EAC/B,IAAIC,YAAY,GAAGD,IAAI,CAACC,YAAxB;EAAA,IACCC,GAAG,GAAGF,IAAI,CAACE,GADZ;EAEA,OAAOJ,gBAAgB,CAAC,UAAUK,CAAV,EAAa;IACpC,IAAIC,qBAAqB,GAAGH,YAAY,CAACI,OAAzC;IAAA,IACCC,EAAE,GAAGF,qBAAqB,CAACE,EAD5B;IAAA,IAECC,EAAE,GAAGH,qBAAqB,CAACG,EAF5B;IAGA,IAAIC,IAAI,GAAGT,eAAe,CAACI,CAAD,CAA1B;IACA,IAAIM,MAAM,GAAGN,CAAC,CAACO,IAAF,KAAW,OAAX,GAAqB,EAArB,GAA0B,CAAvC;IACA,IAAIC,IAAI,GAAG;MACVC,CAAC,EAAEJ,IAAI,CAACI,CAAL,GAASN,EAAT,GAAcG,MADP;MAEVI,CAAC,EAAEL,IAAI,CAACK,CAAL,GAASN,EAAT,GAAcE,MAFP;MAGVK,CAAC,EAAEN,IAAI,CAACM,CAAL,GAASR,EAAT,GAAcG,MAAM,GAAG,CAHhB;MAIVM,CAAC,EAAEP,IAAI,CAACO,CAAL,GAASR,EAAT,GAAcE,MAAM,GAAG;IAJhB,CAAX;;IAOA,IAAIO,IAAI,GAAGnB,aAAa,CAAC,EAAD,EAAKK,GAAG,CAACe,KAAJ,GAAYC,OAAZ,GAAsBC,YAAtB,CAAmCR,IAAI,CAACC,CAAxC,EAA2CD,IAAI,CAACE,CAAhD,CAAL,EAAyD;MAChFC,CAAC,EAAEH,IAAI,CAACG,CAAL,GAASZ,GAAG,CAACkB,CADgE;MAEhFL,CAAC,EAAEJ,IAAI,CAACI,CAAL,GAASb,GAAG,CAACmB;IAFgE,CAAzD,CAAxB;;IAKA,OAAOL,IAAP;EACA,CAnBsB,CAAvB;AAoBA,CAvBD"}