{"version":3,"file":"use-wasd-mode.js","names":["_toConsumableArray","useEffect","useSettings","_ref","getLatestMat","changeMat","_useSettings","wasdMode","vel","dirs","w","a","s","d","keysDown","keys","Object","keyDownListener","e","includes","key","preventDefault","stopPropagation","keyUpListener","interval","setInterval","newMat","clone","somethingChanged","_newMat","translate","apply","window","addEventListener","clearInterval","removeEventListener"],"sources":["../../src/ImageCanvas/use-wasd-mode.js"],"sourcesContent":["import _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray'\nimport { useEffect } from 'react'\nimport { useSettings } from '../SettingsProvider'\nexport default (function (_ref) {\n\tvar getLatestMat = _ref.getLatestMat,\n\t\tchangeMat = _ref.changeMat\n\n\tvar _useSettings = useSettings(),\n\t\twasdMode = _useSettings.wasdMode\n\n\tuseEffect(function () {\n\t\tif (!wasdMode) return\n\t\tvar vel = 10\n\t\tvar dirs = {\n\t\t\tw: [0, -vel],\n\t\t\ta: [-vel, 0],\n\t\t\ts: [0, vel],\n\t\t\td: [vel, 0]\n\t\t}\n\t\tvar keysDown = {}\n\t\tvar keys = Object.keys(dirs)\n\n\t\tvar keyDownListener = function keyDownListener(e) {\n\t\t\tif (keys.includes(e.key)) {\n\t\t\t\tkeysDown[e.key] = true\n\t\t\t\te.preventDefault()\n\t\t\t\te.stopPropagation()\n\t\t\t}\n\t\t}\n\n\t\tvar keyUpListener = function keyUpListener(e) {\n\t\t\tif (keys.includes(e.key)) {\n\t\t\t\tkeysDown[e.key] = false\n\t\t\t\te.preventDefault()\n\t\t\t\te.stopPropagation()\n\t\t\t}\n\t\t}\n\n\t\tvar interval = setInterval(function () {\n\t\t\tvar newMat = getLatestMat().clone()\n\t\t\tvar somethingChanged = false\n\n\t\t\tfor (var key in keysDown) {\n\t\t\t\tif (keysDown[key]) {\n\t\t\t\t\tvar _newMat\n\n\t\t\t\t\tnewMat = (_newMat = newMat).translate.apply(_newMat, _toConsumableArray(dirs[key]))\n\t\t\t\t\tsomethingChanged = true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (somethingChanged) changeMat(newMat)\n\t\t}, 16)\n\t\twindow.addEventListener('keydown', keyDownListener)\n\t\twindow.addEventListener('keyup', keyUpListener)\n\t\treturn function () {\n\t\t\tclearInterval(interval)\n\t\t\twindow.removeEventListener('keydown', keyDownListener)\n\t\t\twindow.removeEventListener('keyup', keyUpListener)\n\t\t}\n\t}, [wasdMode])\n})"],"mappings":"AAAA,OAAOA,kBAAP,MAA+B,8CAA/B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,gBAAgB,UAAUC,IAAV,EAAgB;EAC/B,IAAIC,YAAY,GAAGD,IAAI,CAACC,YAAxB;EAAA,IACCC,SAAS,GAAGF,IAAI,CAACE,SADlB;;EAGA,IAAIC,YAAY,GAAGJ,WAAW,EAA9B;EAAA,IACCK,QAAQ,GAAGD,YAAY,CAACC,QADzB;;EAGAN,SAAS,CAAC,YAAY;IACrB,IAAI,CAACM,QAAL,EAAe;IACf,IAAIC,GAAG,GAAG,EAAV;IACA,IAAIC,IAAI,GAAG;MACVC,CAAC,EAAE,CAAC,CAAD,EAAI,CAACF,GAAL,CADO;MAEVG,CAAC,EAAE,CAAC,CAACH,GAAF,EAAO,CAAP,CAFO;MAGVI,CAAC,EAAE,CAAC,CAAD,EAAIJ,GAAJ,CAHO;MAIVK,CAAC,EAAE,CAACL,GAAD,EAAM,CAAN;IAJO,CAAX;IAMA,IAAIM,QAAQ,GAAG,EAAf;IACA,IAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYN,IAAZ,CAAX;;IAEA,IAAIQ,eAAe,GAAG,SAASA,eAAT,CAAyBC,CAAzB,EAA4B;MACjD,IAAIH,IAAI,CAACI,QAAL,CAAcD,CAAC,CAACE,GAAhB,CAAJ,EAA0B;QACzBN,QAAQ,CAACI,CAAC,CAACE,GAAH,CAAR,GAAkB,IAAlB;QACAF,CAAC,CAACG,cAAF;QACAH,CAAC,CAACI,eAAF;MACA;IACD,CAND;;IAQA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBL,CAAvB,EAA0B;MAC7C,IAAIH,IAAI,CAACI,QAAL,CAAcD,CAAC,CAACE,GAAhB,CAAJ,EAA0B;QACzBN,QAAQ,CAACI,CAAC,CAACE,GAAH,CAAR,GAAkB,KAAlB;QACAF,CAAC,CAACG,cAAF;QACAH,CAAC,CAACI,eAAF;MACA;IACD,CAND;;IAQA,IAAIE,QAAQ,GAAGC,WAAW,CAAC,YAAY;MACtC,IAAIC,MAAM,GAAGtB,YAAY,GAAGuB,KAAf,EAAb;MACA,IAAIC,gBAAgB,GAAG,KAAvB;;MAEA,KAAK,IAAIR,GAAT,IAAgBN,QAAhB,EAA0B;QACzB,IAAIA,QAAQ,CAACM,GAAD,CAAZ,EAAmB;UAClB,IAAIS,OAAJ;;UAEAH,MAAM,GAAG,CAACG,OAAO,GAAGH,MAAX,EAAmBI,SAAnB,CAA6BC,KAA7B,CAAmCF,OAAnC,EAA4C7B,kBAAkB,CAACS,IAAI,CAACW,GAAD,CAAL,CAA9D,CAAT;UACAQ,gBAAgB,GAAG,IAAnB;QACA;MACD;;MAED,IAAIA,gBAAJ,EAAsBvB,SAAS,CAACqB,MAAD,CAAT;IACtB,CAdyB,EAcvB,EAduB,CAA1B;IAeAM,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmChB,eAAnC;IACAe,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCV,aAAjC;IACA,OAAO,YAAY;MAClBW,aAAa,CAACV,QAAD,CAAb;MACAQ,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsClB,eAAtC;MACAe,MAAM,CAACG,mBAAP,CAA2B,OAA3B,EAAoCZ,aAApC;IACA,CAJD;EAKA,CAlDQ,EAkDN,CAAChB,QAAD,CAlDM,CAAT;AAmDA,CA1DD"}