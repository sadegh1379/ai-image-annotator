{"version":3,"file":"region-tools.js","names":["_objectSpread","_slicedToArray","_toConsumableArray","getEnclosingBox","region","type","box","x","Math","min","apply","points","map","_ref","_ref2","y","_ref3","_ref4","w","h","max","_ref5","_ref6","_ref7","_ref8","minX","Object","values","_ref9","minY","_ref10","maxX","_ref11","maxY","_ref12","_box","_ref13","_ref14","_ref15","_ref16","x1","y1","moveRegion"],"sources":["../../src/ImageCanvas/region-tools.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray'\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray'\nexport var getEnclosingBox = function getEnclosingBox(region) {\n\tswitch (region.type) {\n\tcase 'polygon':\n\t\t{\n\t\t\tvar box = {\n\t\t\t\tx: Math.min.apply(Math, _toConsumableArray(region.points.map(function (_ref) {\n\t\t\t\t\tvar _ref2 = _slicedToArray(_ref, 2),\n\t\t\t\t\t\tx = _ref2[0],\n\t\t\t\t\t\ty = _ref2[1]\n\n\t\t\t\t\treturn x\n\t\t\t\t}))),\n\t\t\t\ty: Math.min.apply(Math, _toConsumableArray(region.points.map(function (_ref3) {\n\t\t\t\t\tvar _ref4 = _slicedToArray(_ref3, 2),\n\t\t\t\t\t\tx = _ref4[0],\n\t\t\t\t\t\ty = _ref4[1]\n\n\t\t\t\t\treturn y\n\t\t\t\t}))),\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t\tbox.w = Math.max.apply(Math, _toConsumableArray(region.points.map(function (_ref5) {\n\t\t\t\tvar _ref6 = _slicedToArray(_ref5, 2),\n\t\t\t\t\tx = _ref6[0],\n\t\t\t\t\ty = _ref6[1]\n\n\t\t\t\treturn x\n\t\t\t}))) - box.x\n\t\t\tbox.h = Math.max.apply(Math, _toConsumableArray(region.points.map(function (_ref7) {\n\t\t\t\tvar _ref8 = _slicedToArray(_ref7, 2),\n\t\t\t\t\tx = _ref8[0],\n\t\t\t\t\ty = _ref8[1]\n\n\t\t\t\treturn y\n\t\t\t}))) - box.y\n\t\t\treturn box\n\t\t}\n\n\tcase 'keypoints':\n\t\t{\n\t\t\tvar minX = Math.min.apply(Math, _toConsumableArray(Object.values(region.points).map(function (_ref9) {\n\t\t\t\tvar x = _ref9.x,\n\t\t\t\t\ty = _ref9.y\n\t\t\t\treturn x\n\t\t\t})))\n\t\t\tvar minY = Math.min.apply(Math, _toConsumableArray(Object.values(region.points).map(function (_ref10) {\n\t\t\t\tvar x = _ref10.x,\n\t\t\t\t\ty = _ref10.y\n\t\t\t\treturn y\n\t\t\t})))\n\t\t\tvar maxX = Math.max.apply(Math, _toConsumableArray(Object.values(region.points).map(function (_ref11) {\n\t\t\t\tvar x = _ref11.x,\n\t\t\t\t\ty = _ref11.y\n\t\t\t\treturn x\n\t\t\t})))\n\t\t\tvar maxY = Math.max.apply(Math, _toConsumableArray(Object.values(region.points).map(function (_ref12) {\n\t\t\t\tvar x = _ref12.x,\n\t\t\t\t\ty = _ref12.y\n\t\t\t\treturn y\n\t\t\t})))\n\t\t\treturn {\n\t\t\t\tx: minX,\n\t\t\t\ty: minY,\n\t\t\t\tw: maxX - minX,\n\t\t\t\th: maxY - minY\n\t\t\t}\n\t\t}\n\n\tcase 'expanding-line':\n\t\t{\n\t\t\tvar _box = {\n\t\t\t\tx: Math.min.apply(Math, _toConsumableArray(region.points.map(function (_ref13) {\n\t\t\t\t\tvar x = _ref13.x,\n\t\t\t\t\t\ty = _ref13.y\n\t\t\t\t\treturn x\n\t\t\t\t}))),\n\t\t\t\ty: Math.min.apply(Math, _toConsumableArray(region.points.map(function (_ref14) {\n\t\t\t\t\tvar x = _ref14.x,\n\t\t\t\t\t\ty = _ref14.y\n\t\t\t\t\treturn y\n\t\t\t\t}))),\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t\t_box.w = Math.max.apply(Math, _toConsumableArray(region.points.map(function (_ref15) {\n\t\t\t\tvar x = _ref15.x,\n\t\t\t\t\ty = _ref15.y\n\t\t\t\treturn x\n\t\t\t}))) - _box.x\n\t\t\t_box.h = Math.max.apply(Math, _toConsumableArray(region.points.map(function (_ref16) {\n\t\t\t\tvar x = _ref16.x,\n\t\t\t\t\ty = _ref16.y\n\t\t\t\treturn y\n\t\t\t}))) - _box.y\n\t\t\treturn _box\n\t\t}\n\n\tcase 'line':\n\t\t{\n\t\t\treturn {\n\t\t\t\tx: region.x1,\n\t\t\t\ty: region.y1,\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t}\n\n\tcase 'box':\n\t\t{\n\t\t\treturn {\n\t\t\t\tx: region.x,\n\t\t\t\ty: region.y,\n\t\t\t\tw: region.w,\n\t\t\t\th: region.h\n\t\t\t}\n\t\t}\n\n\tcase 'point':\n\t\t{\n\t\t\treturn {\n\t\t\t\tx: region.x,\n\t\t\t\ty: region.y,\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t}\n\n\tdefault:\n\t\t{\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tw: 0,\n\t\t\t\th: 0\n\t\t\t}\n\t\t}\n\t}\n}\nexport var moveRegion = function moveRegion(region, x, y) {\n\tswitch (region.type) {\n\tcase 'point':\n\t\t{\n\t\t\treturn _objectSpread({}, region, {\n\t\t\t\tx: x,\n\t\t\t\ty: y\n\t\t\t})\n\t\t}\n\n\tcase 'box':\n\t\t{\n\t\t\treturn _objectSpread({}, region, {\n\t\t\t\tx: x - region.w / 2,\n\t\t\t\ty: y - region.h / 2\n\t\t\t})\n\t\t}\n\t}\n\n\treturn region\n}"],"mappings":"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"}