{"version":3,"file":"index.js","names":["_objectSpread","_toConsumableArray","_slicedToArray","React","useRef","useState","useLayoutEffect","useEffect","useMemo","Matrix","Crosshairs","makeStyles","styles","PreventScrollToParents","useWindowSize","useMouse","useProjectRegionBox","useExcludePattern","useRafState","PointDistances","RegionTags","RegionLabel","ImageMask","RegionSelectAndTransformBoxes","VideoOrImageCanvasBackground","useEventCallback","RegionShapes","useWasdMode","useStyles","getDefaultMat","allowedArea","arguments","length","undefined","_ref","iw","ih","mat","from","translate","x","y","scaleU","w","ImageCanvas","_ref2","regions","imageSrc","videoSrc","videoTime","realSize","showTags","_ref2$onMouseMove","onMouseMove","p","_ref2$onMouseDown","onMouseDown","_ref2$onMouseUp","onMouseUp","_ref2$dragWithPrimary","dragWithPrimary","_ref2$zoomWithPrimary","zoomWithPrimary","_ref2$createWithPrima","createWithPrimary","_ref2$pointDistancePr","pointDistancePrecision","regionClsList","regionTagList","showCrosshairs","_ref2$showHighlightBo","showHighlightBox","showPointDistances","_ref2$RegionEditLabel","RegionEditLabel","_ref2$videoPlaying","videoPlaying","_ref2$showMask","showMask","fullImageSegmentationMode","autoSegmentationOptions","onImageOrVideoLoaded","onChangeRegion","onBeginRegionEdit","onCloseRegionEdit","onBeginBoxTransform","onBeginMovePolygonPoint","onAddPolygonPoint","onBeginMoveKeypoint","onSelectRegion","onBeginMovePoint","onDeleteRegion","onChangeVideoTime","onChangeVideoPlaying","onRegionClassAdded","_ref2$zoomOnAllowedAr","zoomOnAllowedArea","_ref2$modifyingAllowe","modifyingAllowedArea","keypointDefinitions","allowComments","onCanvasImageLoadSuccess","onCanvasImageLoadError","isEditable","classes","canvasEl","layoutParams","_useRafState","_useRafState2","dragging","changeDragging","_useRafState3","_useRafState4","maskImagesLoaded","changeMaskImagesLoaded","_useRafState5","_useRafState6","zoomStart","changeZoomStart","_useRafState7","_useRafState8","zoomEnd","changeZoomEnd","_useRafState9","_useRafState10","changeMat","maskImages","windowSize","getLatestMat","_useMouse","mouseEvents","mousePosition","clone","innerMousePos","applyToPoint","current","projectRegionBox","_useState","_useState2","imageDimensions","changeImageDimensions","imageLoaded","Boolean","naturalWidth","onVideoOrImageLoaded","_ref3","naturalHeight","duration","dims","setTimeout","excludePattern","canvas","clientWidth","clientHeight","fitScale","Math","max","_iw","_ih","canvasWidth","canvasHeight","width","height","context","getContext","save","transform","apply","inverse","toArray","_layoutParams$current","h","globalAlpha","outer","inner","moveTo","forEach","lineTo","closePath","reverse","fillStyle","fill","restore","_layoutParams$current2","zoomBox","a","d","imagePosition","topLeft","bottomRight","highlightedRegion","highlightedRegions","filter","r","highlighted","createElement","style","maxHeight","position","overflow","cursor","key","type","id","cls","visible","color","className","fixedRegionLabel","disableClose","allowedClasses","allowedTags","onChange","onDelete","editing","region","zIndex","border","pointerEvents","left","top","Object","assign","Fragment","hide","opacity","ref","fullSegmentationMode","onLoad","useCrossOrigin","zoomIndicator","toFixed"],"sources":["../../src/ImageCanvas/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray'\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray'\nimport React, { useRef, useState, useLayoutEffect, useEffect, useMemo } from 'react'\nimport { Matrix } from 'transformation-matrix-js'\nimport Crosshairs from '../Crosshairs'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './styles'\nimport PreventScrollToParents from '../PreventScrollToParents'\nimport useWindowSize from '../hooks/use-window-size.js'\nimport useMouse from './use-mouse'\nimport useProjectRegionBox from './use-project-box'\nimport useExcludePattern from '../hooks/use-exclude-pattern'\nimport { useRafState } from 'react-use'\nimport PointDistances from '../PointDistances'\nimport RegionTags from '../RegionTags'\nimport RegionLabel from '../RegionLabel'\nimport ImageMask from '../ImageMask'\nimport RegionSelectAndTransformBoxes from '../RegionSelectAndTransformBoxes'\nimport VideoOrImageCanvasBackground from '../VideoOrImageCanvasBackground'\nimport useEventCallback from 'use-event-callback'\nimport RegionShapes from '../RegionShapes'\nimport useWasdMode from './use-wasd-mode'\nvar useStyles = makeStyles(styles)\n\nvar getDefaultMat = function getDefaultMat() {\n\tvar allowedArea = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t\tiw = _ref.iw,\n\t\tih = _ref.ih\n\n\tvar mat = Matrix.from(1, 0, 0, 1, -10, -10)\n\n\tif (allowedArea && iw) {\n\t\tmat = mat.translate(allowedArea.x * iw, allowedArea.y * ih).scaleU(allowedArea.w + 0.05)\n\t}\n\n\treturn mat\n}\n\nexport var ImageCanvas = function ImageCanvas(_ref2) {\n\tvar regions = _ref2.regions,\n\t\timageSrc = _ref2.imageSrc,\n\t\tvideoSrc = _ref2.videoSrc,\n\t\tvideoTime = _ref2.videoTime,\n\t\trealSize = _ref2.realSize,\n\t\tshowTags = _ref2.showTags,\n\t\t_ref2$onMouseMove = _ref2.onMouseMove,\n\t\tonMouseMove = _ref2$onMouseMove === void 0 ? function (p) {\n\t\t\treturn null\n\t\t} : _ref2$onMouseMove,\n\t\t_ref2$onMouseDown = _ref2.onMouseDown,\n\t\tonMouseDown = _ref2$onMouseDown === void 0 ? function (p) {\n\t\t\treturn null\n\t\t} : _ref2$onMouseDown,\n\t\t_ref2$onMouseUp = _ref2.onMouseUp,\n\t\tonMouseUp = _ref2$onMouseUp === void 0 ? function (p) {\n\t\t\treturn null\n\t\t} : _ref2$onMouseUp,\n\t\t_ref2$dragWithPrimary = _ref2.dragWithPrimary,\n\t\tdragWithPrimary = _ref2$dragWithPrimary === void 0 ? false : _ref2$dragWithPrimary,\n\t\t_ref2$zoomWithPrimary = _ref2.zoomWithPrimary,\n\t\tzoomWithPrimary = _ref2$zoomWithPrimary === void 0 ? false : _ref2$zoomWithPrimary,\n\t\t_ref2$createWithPrima = _ref2.createWithPrimary,\n\t\tcreateWithPrimary = _ref2$createWithPrima === void 0 ? false : _ref2$createWithPrima,\n\t\t_ref2$pointDistancePr = _ref2.pointDistancePrecision,\n\t\tpointDistancePrecision = _ref2$pointDistancePr === void 0 ? 0 : _ref2$pointDistancePr,\n\t\tregionClsList = _ref2.regionClsList,\n\t\tregionTagList = _ref2.regionTagList,\n\t\tshowCrosshairs = _ref2.showCrosshairs,\n\t\t_ref2$showHighlightBo = _ref2.showHighlightBox,\n\t\tshowHighlightBox = _ref2$showHighlightBo === void 0 ? true : _ref2$showHighlightBo,\n\t\tshowPointDistances = _ref2.showPointDistances,\n\t\tallowedArea = _ref2.allowedArea,\n\t\t_ref2$RegionEditLabel = _ref2.RegionEditLabel,\n\t\tRegionEditLabel = _ref2$RegionEditLabel === void 0 ? null : _ref2$RegionEditLabel,\n\t\t_ref2$videoPlaying = _ref2.videoPlaying,\n\t\tvideoPlaying = _ref2$videoPlaying === void 0 ? false : _ref2$videoPlaying,\n\t\t_ref2$showMask = _ref2.showMask,\n\t\tshowMask = _ref2$showMask === void 0 ? true : _ref2$showMask,\n\t\tfullImageSegmentationMode = _ref2.fullImageSegmentationMode,\n\t\tautoSegmentationOptions = _ref2.autoSegmentationOptions,\n\t\tonImageOrVideoLoaded = _ref2.onImageOrVideoLoaded,\n\t\tonChangeRegion = _ref2.onChangeRegion,\n\t\tonBeginRegionEdit = _ref2.onBeginRegionEdit,\n\t\tonCloseRegionEdit = _ref2.onCloseRegionEdit,\n\t\tonBeginBoxTransform = _ref2.onBeginBoxTransform,\n\t\tonBeginMovePolygonPoint = _ref2.onBeginMovePolygonPoint,\n\t\tonAddPolygonPoint = _ref2.onAddPolygonPoint,\n\t\tonBeginMoveKeypoint = _ref2.onBeginMoveKeypoint,\n\t\tonSelectRegion = _ref2.onSelectRegion,\n\t\tonBeginMovePoint = _ref2.onBeginMovePoint,\n\t\tonDeleteRegion = _ref2.onDeleteRegion,\n\t\tonChangeVideoTime = _ref2.onChangeVideoTime,\n\t\tonChangeVideoPlaying = _ref2.onChangeVideoPlaying,\n\t\tonRegionClassAdded = _ref2.onRegionClassAdded,\n\t\t_ref2$zoomOnAllowedAr = _ref2.zoomOnAllowedArea,\n\t\tzoomOnAllowedArea = _ref2$zoomOnAllowedAr === void 0 ? true : _ref2$zoomOnAllowedAr,\n\t\t_ref2$modifyingAllowe = _ref2.modifyingAllowedArea,\n\t\tmodifyingAllowedArea = _ref2$modifyingAllowe === void 0 ? false : _ref2$modifyingAllowe,\n\t\tkeypointDefinitions = _ref2.keypointDefinitions,\n\t\tallowComments = _ref2.allowComments,\n\t\tonCanvasImageLoadSuccess = _ref2.onCanvasImageLoadSuccess,\n\t\tonCanvasImageLoadError = _ref2.onCanvasImageLoadError,\n\t\tisEditable = _ref2.isEditable\n\tvar classes = useStyles()\n\tvar canvasEl = useRef(null)\n\tvar layoutParams = useRef({})\n\n\tvar _useRafState = useRafState(false),\n\t\t_useRafState2 = _slicedToArray(_useRafState, 2),\n\t\tdragging = _useRafState2[0],\n\t\tchangeDragging = _useRafState2[1]\n\n\tvar _useRafState3 = useRafState(0),\n\t\t_useRafState4 = _slicedToArray(_useRafState3, 2),\n\t\tmaskImagesLoaded = _useRafState4[0],\n\t\tchangeMaskImagesLoaded = _useRafState4[1]\n\n\tvar _useRafState5 = useRafState(null),\n\t\t_useRafState6 = _slicedToArray(_useRafState5, 2),\n\t\tzoomStart = _useRafState6[0],\n\t\tchangeZoomStart = _useRafState6[1]\n\n\tvar _useRafState7 = useRafState(null),\n\t\t_useRafState8 = _slicedToArray(_useRafState7, 2),\n\t\tzoomEnd = _useRafState8[0],\n\t\tchangeZoomEnd = _useRafState8[1]\n\n\tvar _useRafState9 = useRafState(getDefaultMat()),\n\t\t_useRafState10 = _slicedToArray(_useRafState9, 2),\n\t\tmat = _useRafState10[0],\n\t\tchangeMat = _useRafState10[1]\n\n\tvar maskImages = useRef({})\n\tvar windowSize = useWindowSize()\n\tvar getLatestMat = useEventCallback(function () {\n\t\treturn mat\n\t})\n\tuseWasdMode({\n\t\tgetLatestMat: getLatestMat,\n\t\tchangeMat: changeMat\n\t})\n\n\tvar _useMouse = useMouse({\n\t\t\tcanvasEl: canvasEl,\n\t\t\tdragging: dragging,\n\t\t\tmat: mat,\n\t\t\tlayoutParams: layoutParams,\n\t\t\tchangeMat: changeMat,\n\t\t\tzoomStart: zoomStart,\n\t\t\tzoomEnd: zoomEnd,\n\t\t\tchangeZoomStart: changeZoomStart,\n\t\t\tchangeZoomEnd: changeZoomEnd,\n\t\t\tchangeDragging: changeDragging,\n\t\t\tzoomWithPrimary: zoomWithPrimary,\n\t\t\tdragWithPrimary: dragWithPrimary,\n\t\t\tonMouseMove: onMouseMove,\n\t\t\tonMouseDown: onMouseDown,\n\t\t\tonMouseUp: onMouseUp\n\t\t}),\n\t\tmouseEvents = _useMouse.mouseEvents,\n\t\tmousePosition = _useMouse.mousePosition\n\n\tuseLayoutEffect(function () {\n\t\treturn changeMat(mat.clone())\n\t}, [windowSize])\n\tvar innerMousePos = mat.applyToPoint(mousePosition.current.x, mousePosition.current.y)\n\tvar projectRegionBox = useProjectRegionBox({\n\t\tlayoutParams: layoutParams,\n\t\tmat: mat\n\t})\n\n\tvar _useState = useState(),\n\t\t_useState2 = _slicedToArray(_useState, 2),\n\t\timageDimensions = _useState2[0],\n\t\tchangeImageDimensions = _useState2[1]\n\n\tvar imageLoaded = Boolean(imageDimensions && imageDimensions.naturalWidth)\n\tvar onVideoOrImageLoaded = useEventCallback(function (_ref3) {\n\t\tvar naturalWidth = _ref3.naturalWidth,\n\t\t\tnaturalHeight = _ref3.naturalHeight,\n\t\t\tduration = _ref3.duration\n\t\tvar dims = {\n\t\t\tnaturalWidth: naturalWidth,\n\t\t\tnaturalHeight: naturalHeight,\n\t\t\tduration: duration\n\t\t}\n\t\tif (onImageOrVideoLoaded) onImageOrVideoLoaded(dims)\n\t\tchangeImageDimensions(dims) // Redundant update to fix rerendering issues\n\n\t\tsetTimeout(function () {\n\t\t\treturn changeImageDimensions(dims)\n\t\t}, 10)\n\t})\n\tvar excludePattern = useExcludePattern()\n\tvar canvas = canvasEl.current\n\n\tif (canvas && imageLoaded) {\n\t\tvar clientWidth = canvas.clientWidth,\n\t\t\tclientHeight = canvas.clientHeight\n\t\tvar fitScale = Math.max(imageDimensions.naturalWidth / (clientWidth - 20), imageDimensions.naturalHeight / (clientHeight - 20))\n\n\t\tvar _iw = imageDimensions.naturalWidth / fitScale,\n\t\t\t_ih = imageDimensions.naturalHeight / fitScale\n\n\t\tlayoutParams.current = {\n\t\t\tiw: _iw,\n\t\t\tih: _ih,\n\t\t\tfitScale: fitScale,\n\t\t\tcanvasWidth: clientWidth,\n\t\t\tcanvasHeight: clientHeight\n\t\t}\n\t}\n\n\tuseEffect(function () {\n\t\tif (!imageLoaded) return\n\t\tchangeMat(getDefaultMat(zoomOnAllowedArea ? allowedArea : null, layoutParams.current)) // eslint-disable-next-line\n  }, [imageLoaded]);\n\tuseLayoutEffect(function () {\n\t\tif (!imageDimensions) return\n\t\tvar clientWidth = canvas.clientWidth,\n\t\t\tclientHeight = canvas.clientHeight\n\t\tcanvas.width = clientWidth\n\t\tcanvas.height = clientHeight\n\t\tvar context = canvas.getContext('2d')\n\t\tcontext.save()\t\t\n\t\tcontext.transform.apply(context, _toConsumableArray(mat.clone().inverse().toArray()))\n\t\tvar _layoutParams$current = layoutParams.current,\n\t\t\tiw = _layoutParams$current.iw,\n\t\t\tih = _layoutParams$current.ih\n\n\t\tif (allowedArea) {\n      // Pattern to indicate the NOT allowed areas\n\t\t\tvar x = allowedArea.x,\n\t\t\t\ty = allowedArea.y,\n\t\t\t\tw = allowedArea.w,\n\t\t\t\th = allowedArea.h\n\t\t\tcontext.save()\n\t\t\tcontext.globalAlpha = 1\n\t\t\tvar outer = [[0, 0], [iw, 0], [iw, ih], [0, ih]]\n\t\t\tvar inner = [[x * iw, y * ih], [x * iw + w * iw, y * ih], [x * iw + w * iw, y * ih + h * ih], [x * iw, y * ih + h * ih]]\n\t\t\tcontext.moveTo.apply(context, _toConsumableArray(outer[0]))\n\t\t\touter.forEach(function (p) {\n\t\t\t\treturn context.lineTo.apply(context, _toConsumableArray(p))\n\t\t\t})\n\t\t\tcontext.lineTo.apply(context, _toConsumableArray(outer[0]))\n\t\t\tcontext.closePath()\n\t\t\tinner.reverse()\n\t\t\tcontext.moveTo.apply(context, _toConsumableArray(inner[0]))\n\t\t\tinner.forEach(function (p) {\n\t\t\t\treturn context.lineTo.apply(context, _toConsumableArray(p))\n\t\t\t})\n\t\t\tcontext.lineTo.apply(context, _toConsumableArray(inner[0]))\n\t\t\tcontext.fillStyle = excludePattern || '#f00'\n\t\t\tcontext.fill()\n\t\t\tcontext.restore()\n\t\t}\n\n\t\tcontext.restore()\n\t})\n\tvar _layoutParams$current2 = layoutParams.current,\n\t\tiw = _layoutParams$current2.iw,\n\t\tih = _layoutParams$current2.ih\n\tvar zoomBox = !zoomStart || !zoomEnd ? null : _objectSpread({}, mat.clone().inverse().applyToPoint(zoomStart.x, zoomStart.y), {\n\t\tw: (zoomEnd.x - zoomStart.x) / mat.a,\n\t\th: (zoomEnd.y - zoomStart.y) / mat.d\n\t})\n\n\tif (zoomBox) {\n\t\tif (zoomBox.w < 0) {\n\t\t\tzoomBox.x += zoomBox.w\n\t\t\tzoomBox.w *= -1\n\t\t}\n\n\t\tif (zoomBox.h < 0) {\n\t\t\tzoomBox.y += zoomBox.h\n\t\t\tzoomBox.h *= -1\n\t\t}\n\t}\n\n\tvar imagePosition = {\n\t\ttopLeft: mat.clone().inverse().applyToPoint(0, 0),\n\t\tbottomRight: mat.clone().inverse().applyToPoint(iw, ih)\n\t}\n\tvar highlightedRegion = useMemo(function () {\n\t\tvar highlightedRegions = regions.filter(function (r) {\n\t\t\treturn r.highlighted\n\t\t})\n\t\tif (highlightedRegions.length !== 1) return null\n\t\treturn highlightedRegions[0]\n\t}, [regions])\n\treturn React.createElement('div', {\n\t\tstyle: {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tmaxHeight: 'calc(100vh - 68px)',\n\t\t\tposition: 'relative',\n\t\t\toverflow: 'hidden',\n\t\t\tcursor: createWithPrimary ? 'crosshair' : dragging ? 'grabbing' : dragWithPrimary ? 'grab' : zoomWithPrimary ? mat.a < 1 ? 'zoom-out' : 'zoom-in' : undefined\n\t\t}\n\t}, showCrosshairs && React.createElement(Crosshairs, {\n\t\tkey: 'crossHairs',\n\t\tmousePosition: mousePosition\n\t}), imageLoaded && !dragging && React.createElement(RegionSelectAndTransformBoxes, {\n\t\tkey: 'regionSelectAndTransformBoxes',\n\t\tregions: !modifyingAllowedArea || !allowedArea ? regions : [{\n\t\t\ttype: 'box',\n\t\t\tid: '$$allowed_area',\n\t\t\tcls: 'allowed_area',\n\t\t\thighlighted: true,\n\t\t\tx: allowedArea.x,\n\t\t\ty: allowedArea.y,\n\t\t\tw: allowedArea.w,\n\t\t\th: allowedArea.h,\n\t\t\tvisible: true,\n\t\t\tcolor: '#ff0'\n\t\t}],\n\t\tmouseEvents: mouseEvents,\n\t\tprojectRegionBox: projectRegionBox,\n\t\tdragWithPrimary: dragWithPrimary,\n\t\tcreateWithPrimary: createWithPrimary,\n\t\tzoomWithPrimary: zoomWithPrimary,\n\t\tonBeginMovePoint: onBeginMovePoint,\n\t\tonSelectRegion: onSelectRegion,\n\t\tlayoutParams: layoutParams,\n\t\tmat: mat,\n\t\tonBeginBoxTransform: onBeginBoxTransform,\n\t\tonBeginMovePolygonPoint: onBeginMovePolygonPoint,\n\t\tonBeginMoveKeypoint: onBeginMoveKeypoint,\n\t\tonAddPolygonPoint: onAddPolygonPoint,\n\t\tshowHighlightBox: showHighlightBox,\n\t\tshowTags: showTags,\n\t\tisEditable: isEditable\n\t}), imageLoaded && showTags && !dragging && React.createElement(PreventScrollToParents, {\n\t\tkey: 'regionTags'\n\t}, React.createElement(RegionTags, {\n\t\tregions: regions,\n\t\tprojectRegionBox: projectRegionBox,\n\t\tmouseEvents: mouseEvents,\n\t\tregionClsList: regionClsList,\n\t\tregionTagList: regionTagList,\n\t\tonBeginRegionEdit: onBeginRegionEdit,\n\t\tonChangeRegion: onChangeRegion,\n\t\tonCloseRegionEdit: onCloseRegionEdit,\n\t\tonDeleteRegion: onDeleteRegion,\n\t\tlayoutParams: layoutParams,\n\t\timageSrc: imageSrc,\n\t\tRegionEditLabel: RegionEditLabel,\n\t\tonRegionClassAdded: onRegionClassAdded,\n\t\tallowComments: allowComments,\n\t\tisEditable: isEditable\n\t})), !showTags && highlightedRegion && React.createElement('div', {\n\t\tkey: 'topLeftTag',\n\t\tclassName: classes.fixedRegionLabel\n\t}, React.createElement(RegionLabel, {\n\t\tdisableClose: true,\n\t\tallowedClasses: regionClsList,\n\t\tallowedTags: regionTagList,\n\t\tonChange: onChangeRegion,\n\t\tonDelete: onDeleteRegion,\n\t\tediting: isEditable,\n\t\tregion: highlightedRegion,\n\t\timageSrc: imageSrc,\n\t\tallowComments: allowComments\n\t})), zoomWithPrimary && zoomBox !== null && React.createElement('div', {\n\t\tkey: 'zoomBox',\n\t\tstyle: {\n\t\tposition: 'absolute',\n\t\tzIndex: 1,\n\t\tborder: '1px solid #fff',\n\t\tpointerEvents: 'none',\n\t\tleft: zoomBox.x,\n\t\ttop: zoomBox.y,\n\t\twidth: zoomBox.w,\n\t\theight: zoomBox.h\n\t}\n\t}), showPointDistances && React.createElement(PointDistances, {\n\tkey: 'pointDistances',\n\tregions: regions,\n\trealSize: realSize,\n\tprojectRegionBox: projectRegionBox,\n\tpointDistancePrecision: pointDistancePrecision\n}), React.createElement(PreventScrollToParents, Object.assign({\n\tstyle: {\n\t\twidth: '100%',\n\t\theight: '100%'\n\t}\n}, mouseEvents), React.createElement(React.Fragment, null, fullImageSegmentationMode && React.createElement(ImageMask, {\n\thide: !showMask,\n\tautoSegmentationOptions: autoSegmentationOptions,\n\timagePosition: imagePosition,\n\tregionClsList: regionClsList,\n\timageSrc: imageSrc,\n\tregions: regions\n}), React.createElement('canvas', {\n\tstyle: {\n\t\topacity: 0.25\n\t},\n\tclassName: classes.canvas,\n\tref: canvasEl\n}), React.createElement(RegionShapes, {\n\tmat: mat,\n\tkeypointDefinitions: keypointDefinitions,\n\timagePosition: imagePosition,\n\tregions: regions,\n\tfullSegmentationMode: fullImageSegmentationMode\n}), React.createElement(VideoOrImageCanvasBackground, {\n\tvideoPlaying: videoPlaying,\n\timagePosition: imagePosition,\n\tmouseEvents: mouseEvents,\n\tonLoad: onVideoOrImageLoaded,\n\tonCanvasImageLoadSuccess: onCanvasImageLoadSuccess,\n\tonCanvasImageLoadError: onCanvasImageLoadError,\n\tvideoTime: videoTime,\n\tvideoSrc: videoSrc,\n\timageSrc: imageSrc,\n\tuseCrossOrigin: fullImageSegmentationMode,\n\tonChangeVideoTime: onChangeVideoTime,\n\tonChangeVideoPlaying: onChangeVideoPlaying\n}))), React.createElement('div', {\n\tclassName: classes.zoomIndicator\n}, (1 / mat.a * 100).toFixed(0), '%'))\n}\nexport default ImageCanvas"],"mappings":"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"}