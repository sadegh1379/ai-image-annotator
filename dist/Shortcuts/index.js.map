{"version":3,"file":"index.js","names":["_objectSpread","_slicedToArray","React","useState","useEffect","SidebarBoxContainer","setIn","ShortcutField","defaultShortcuts","select","action","type","name","key","zoom","pan","buttonName","_ref","onShortcutActionDispatched","_useState","_useState2","shortcuts","setShortcuts","newShortcuts","_i","_Object$keys","Object","keys","length","actionId","onChangeShortcut","keyName","handleKeyPress","e","shortcut","selectedTool","window","addEventListener","removeEventListener","document","activeElement","blur","createElement","title","map","index","actionName","filter","Boolean"],"sources":["../../src/Shortcuts/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray'\nimport React, { useState, useEffect } from 'react'\nimport SidebarBoxContainer from '../SidebarBoxContainer'\nimport { setIn } from 'seamless-immutable'\nimport ShortcutField from './ShortcutField'\nvar defaultShortcuts = {\n\tselect: {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Select Region',\n\t\tkey: 'Escape'\n\t},\n\tzoom: {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Zoom In/Out',\n\t\tkey: 'z'\n\t},\n\t'create-point': {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Create Point'\n\t},\n\t'create-box': {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Add Bounding Box',\n\t\tkey: 'b'\n\t},\n\tpan: {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Pan'\n\t},\n\t'create-polygon': {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Create Polygon'\n\t},\n\t'create-pixel': {\n\t\taction: {\n\t\t\ttype: 'SELECT_TOOL'\n\t\t},\n\t\tname: 'Create Pixel'\n\t},\n\t'prev-image': {\n\t\taction: {\n\t\t\ttype: 'HEADER_BUTTON_CLICKED',\n\t\t\tbuttonName: 'Prev'\n\t\t},\n\t\tname: 'Previous Image',\n\t\tkey: 'a'\n\t},\n\t'next-image': {\n\t\taction: {\n\t\t\ttype: 'HEADER_BUTTON_CLICKED',\n\t\t\tbuttonName: 'Next'\n\t\t},\n\t\tname: 'Next Image',\n\t\tkey: 'd' //\"ArrowRight\"\n\n\t}\n}\nexport default (function (_ref) {\n\tvar onShortcutActionDispatched = _ref.onShortcutActionDispatched\n\n\tvar _useState = useState({}),\n\t\t_useState2 = _slicedToArray(_useState, 2),\n\t\tshortcuts = _useState2[0],\n\t\tsetShortcuts = _useState2[1] // useLocalStorage\n\n\n\tuseEffect(function () {\n\t\tvar newShortcuts = _objectSpread({}, shortcuts)\n\n\t\tfor (var _i = 0, _Object$keys = Object.keys(defaultShortcuts); _i < _Object$keys.length; _i++) {\n\t\t\tvar actionId = _Object$keys[_i]\n\n\t\t\tif (!newShortcuts[actionId]) {\n\t\t\t\tnewShortcuts[actionId] = defaultShortcuts[actionId]\n\t\t\t}\n\t\t}\n\n\t\tsetShortcuts(newShortcuts)\n\t}, [])\n\n\tvar onChangeShortcut = function onChangeShortcut(actionId, keyName) {\n\t\tsetShortcuts(setIn(shortcuts, [actionId, 'key'], keyName))\n\t}\n\n\tuseEffect(function () {\n\t\tvar handleKeyPress = function handleKeyPress(e) {\n\t\t\tfor (var actionId in shortcuts) {\n\t\t\t\tvar shortcut = shortcuts[actionId]\n\n\t\t\t\tif (!shortcut || !shortcut.key) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tif (e.key === shortcut.key) {\n\t\t\t\t\tonShortcutActionDispatched(_objectSpread({}, shortcut.action, {\n\t\t\t\t\t\tselectedTool: actionId\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('keypress', handleKeyPress)\n\t\treturn function () {\n\t\t\twindow.removeEventListener('keypress', handleKeyPress)\n\t\t\tdocument.activeElement.blur()\n\t\t}\n\t}, [shortcuts])\n\treturn React.createElement(SidebarBoxContainer, {\n\t\ttitle: 'Shortcuts'\n\t}, Object.keys(shortcuts).map(function (actionId, index) {\n\t\tif (!shortcuts[actionId]) return null\n\t\treturn React.createElement(ShortcutField, {\n\t\t\tkey: actionId,\n\t\t\tactionId: actionId,\n\t\t\tactionName: shortcuts[actionId].name,\n\t\t\tkeyName: shortcuts[actionId].key || '',\n\t\t\tonChangeShortcut: onChangeShortcut\n\t\t})\n\t}).filter(Boolean))\n})"],"mappings":"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"}