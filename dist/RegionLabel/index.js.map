{"version":3,"file":"index.js","names":["_objectSpread","React","useRef","memo","Paper","makeStyles","styles","classnames","IconButton","Button","TrashIcon","CheckIcon","TextField","Select","CreatableSelect","asMutable","useStyles","RegionLabel","_ref","region","editing","allowedClasses","allowedTags","onDelete","_onChange","onChange","onClose","onOpen","onRegionClassAdded","allowComments","classes","commentInputRef","onCommentInputClick","_","commentInput","current","children","focus","createElement","onClick","className","regionInfo","highlighted","cls","style","backgroundColor","color","name","tags","map","t","key","width","display","flexDirection","padding","paddingLeft","paddingRight","borderRadius","fontWeight","textShadow","type","flexGrow","tabIndex","height","size","variant","marginTop","length","placeholder","o","actionMeta","action","value","label","options","c","newTags","isMulti","InputProps","commentBox","fullWidth","multiline","rows","ref","comment","event","target","prevProps","nextProps"],"sources":["../../src/RegionLabel/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport React, { useRef, memo } from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './styles'\nimport classnames from 'classnames'\nimport IconButton from '@material-ui/core/IconButton'\nimport Button from '@material-ui/core/Button'\nimport TrashIcon from '@material-ui/icons/Delete'\nimport CheckIcon from '@material-ui/icons/Check'\nimport TextField from '@material-ui/core/TextField'\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/creatable'\nimport { asMutable } from 'seamless-immutable'\nvar useStyles = makeStyles(styles)\nexport var RegionLabel = function RegionLabel(_ref) {\n\tvar region = _ref.region,\n\t\tediting = _ref.editing,\n\t\tallowedClasses = _ref.allowedClasses,\n\t\tallowedTags = _ref.allowedTags,\n\t\tonDelete = _ref.onDelete,\n\t\t_onChange = _ref.onChange,\n\t\tonClose = _ref.onClose,\n\t\tonOpen = _ref.onOpen,\n\t\tonRegionClassAdded = _ref.onRegionClassAdded,\n\t\tallowComments = _ref.allowComments\n\tvar classes = useStyles()\n\tvar commentInputRef = useRef(null)\n\n\tvar onCommentInputClick = function onCommentInputClick(_) {\n    // The TextField wraps the <input> tag with two divs\n\t\tvar commentInput = commentInputRef.current.children[0].children[0]\n\t\tif (commentInput) return commentInput.focus()\n\t}\n\n\treturn React.createElement(Paper, {\n\t\tonClick: function onClick() {\n\t\t\treturn !editing ? onOpen(region) : null\n\t\t},\n\t\tclassName: classnames(classes.regionInfo, {\n\t\t\thighlighted: region.highlighted\n\t\t})\n\t}, !editing ? React.createElement('div', null, region.cls && React.createElement('div', {\n\t\tclassName: 'name'\n\t}, React.createElement('div', {\n\t\tclassName: 'circle',\n\t\tstyle: {\n\t\t\tbackgroundColor: region.color\n\t\t}\n\t}), region.cls.name ? region.cls.name : region.cls), region.tags && React.createElement('div', {\n\t\tclassName: 'tags'\n\t}, region.tags.map(function (t) {\n\t\treturn React.createElement('div', {\n\t\t\tkey: t,\n\t\t\tclassName: 'tag'\n\t\t}, t)\n\t}))) : React.createElement('div', {\n\t\tstyle: {\n\t\t\twidth: 200\n\t\t}\n\t}, React.createElement('div', {\n\t\tstyle: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexDirection: 'row'\n\t\t}\n\t}, React.createElement('div', {\n\t\tstyle: {\n\t\t\tdisplay: 'flex',\n\t\t\tbackgroundColor: region.color || '#888',\n\t\t\tcolor: '#fff',\n\t\t\tpadding: 4,\n\t\t\tpaddingLeft: 8,\n\t\t\tpaddingRight: 8,\n\t\t\tborderRadius: 4,\n\t\t\tfontWeight: 'bold',\n\t\t\ttextShadow: '0px 0px 5px rgba(0,0,0,0.4)'\n\t\t}\n\t}, region.type), React.createElement('div', {\n\t\tstyle: {\n\t\tflexGrow: 1\n\t}\n\t}), React.createElement(IconButton, {\n\tonClick: function onClick() {\n\t\treturn onDelete(region)\n\t},\n\ttabIndex: -1,\n\tstyle: {\n\t\twidth: 22,\n\t\theight: 22\n\t},\n\tsize: 'small',\n\tvariant: 'outlined'\n}, React.createElement(TrashIcon, {\n\tstyle: {\n\t\tmarginTop: -8,\n\t\twidth: 16,\n\t\theight: 16\n\t}\n}))), (allowedClasses || []).length > 0 && React.createElement('div', {\n\tstyle: {\n\t\tmarginTop: 6\n\t}\n}, React.createElement(CreatableSelect, {\n\tplaceholder: 'Category',\n\tonChange: function onChange(o, actionMeta) {\n\t\tif (actionMeta.action == 'create-option') {\n\t\t\tonRegionClassAdded(o.value)\n\t\t}\n\n\t\treturn _onChange(_objectSpread({}, region, {\n\t\t\tcls: o.value\n\t\t}))\n\t},\n\tvalue: region.cls ? {\n\t\tlabel: region.cls.name ? region.cls.name : region.cls,\n\t\tvalue: region.cls\n\t} : null,\n\toptions: asMutable(allowedClasses.map(function (c) {\n\t\treturn {\n\t\t\tvalue: c,\n\t\t\tlabel: c.name\n\t\t}\n\t}))\n})), (allowedTags || []).length > 0 && React.createElement('div', {\n\tstyle: {\n\t\tmarginTop: 4\n\t}\n}, React.createElement(Select, {\n\tonChange: function onChange(newTags) {\n\t\treturn _onChange(_objectSpread({}, region, {\n\t\t\ttags: newTags.map(function (t) {\n\t\t\t\treturn t.value\n\t\t\t})\n\t\t}))\n\t},\n\tplaceholder: 'Tags',\n\tvalue: (region.tags || []).map(function (c) {\n\t\treturn {\n\t\t\tlabel: c,\n\t\t\tvalue: c\n\t\t}\n\t}),\n\tisMulti: true,\n\toptions: asMutable(allowedTags.map(function (c) {\n\t\treturn {\n\t\t\tvalue: c,\n\t\t\tlabel: c\n\t\t}\n\t}))\n})), allowComments && React.createElement(TextField, {\n\tInputProps: {\n\t\tclassName: classes.commentBox\n\t},\n\tfullWidth: true,\n\tmultiline: true,\n\trows: 3,\n\tref: commentInputRef,\n\tonClick: onCommentInputClick,\n\tvalue: region.comment || '',\n\tonChange: function onChange(event) {\n\t\treturn _onChange(_objectSpread({}, region, {\n\t\t\tcomment: event.target.value\n\t\t}))\n\t}\n}), onClose && React.createElement('div', {\n\tstyle: {\n\t\tmarginTop: 4,\n\t\tdisplay: 'flex'\n\t}\n}, React.createElement('div', {\n\tstyle: {\n\t\tflexGrow: 1\n\t}\n}), React.createElement(Button, {\n\tonClick: function onClick() {\n\t\treturn onClose(region)\n\t},\n\tsize: 'small',\n\tvariant: 'contained',\n\tcolor: 'primary'\n}, React.createElement(CheckIcon, null)))))\n}\nexport default memo(RegionLabel, function (prevProps, nextProps) {\n\treturn prevProps.editing === nextProps.editing && prevProps.region === nextProps.region\n})"],"mappings":"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"}