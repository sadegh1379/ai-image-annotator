{"version":3,"file":"index.js","names":["_objectSpread","_slicedToArray","React","useReducer","useEffect","useState","MainLayout","DemoLayout","SettingsProvider","combineReducers","generalReducer","imageReducer","videoReducer","historyHandler","useEventCallback","makeImmutable","without","getFromLocalStorage","JssProvider","create","createGenerateClassName","jssPreset","StylesProvider","Annotator","_ref","generateClassName","jss","insertionPoint","images","demo","allowedArea","_ref$selectedImage","selectedImage","length","undefined","showPointDistances","pointDistancePrecision","_ref$showTags","showTags","_ref$enabledTools","enabledTools","_ref$selectedTool","selectedTool","_ref$regionTagList","regionTagList","_ref$regionClsList","regionClsList","_ref$imageTagList","imageTagList","_ref$imageClsList","imageClsList","_ref$keyframes","keyframes","_ref$taskDescription","taskDescription","_ref$fullImageSegment","fullImageSegmentationMode","RegionEditLabel","videoSrc","_ref$videoTime","videoTime","videoName","onExit","onNextImage","onPrevImage","keypointDefinitions","_ref$autoSegmentation","autoSegmentationOptions","type","hideHeader","hideHeaderText","hideNext","hidePrev","rightExtraItems","onCanvasImageLoadSuccess","onCanvasImageLoadError","allowComments","onStateUpdate","isEditable","findIndex","img","src","annotationType","_useReducer","mode","showMask","labelImages","currentVideoTime","history","selectedImageFrameTime","frameTime","_useReducer2","state","dispatchToReducer","dispatch","action","includes","buttonName","onRegionClassAdded","cls","imageIndex","image","createElement","alwaysShowNextButton","Boolean","alwaysShowPrevButton","injectFirst"],"sources":["../../src/Annotator/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport React, { useReducer, useEffect, useState } from 'react';\nimport MainLayout from '../MainLayout';\nimport DemoLayout from '../DemoLayout';\nimport SettingsProvider from '../SettingsProvider';\nimport combineReducers from './reducers/combine-reducers.js';\nimport generalReducer from './reducers/general-reducer.js';\nimport imageReducer from './reducers/image-reducer.js';\nimport videoReducer from './reducers/video-reducer.js';\nimport historyHandler from './reducers/history-handler.js';\nimport useEventCallback from 'use-event-callback';\nimport makeImmutable, { without } from 'seamless-immutable';\nimport getFromLocalStorage from '../utils/get-from-local-storage';\nimport { JssProvider } from 'react-jss';\nimport { create } from 'jss';\nimport { createGenerateClassName, jssPreset, StylesProvider } from '@material-ui/core/styles';\n\nexport var Annotator = function Annotator(_ref) {\n\tconst generateClassName = createGenerateClassName();\n\tconst jss = create({\n\t\t...jssPreset(),\n\t\t// We define a custom insertion point that JSS will look for injecting the styles in the DOM.\n\t\tinsertionPoint: 'jss-insertion-point'\n\t});\n\n\tvar images = _ref.images,\n\t\tdemo = _ref.demo,\n\t\tallowedArea = _ref.allowedArea,\n\t\t_ref$selectedImage = _ref.selectedImage,\n\t\tselectedImage =\n\t\t\t_ref$selectedImage === void 0 ? (images && images.length > 0 ? 0 : undefined) : _ref$selectedImage,\n\t\tshowPointDistances = _ref.showPointDistances,\n\t\tpointDistancePrecision = _ref.pointDistancePrecision,\n\t\t_ref$showTags = _ref.showTags,\n\t\tshowTags = _ref$showTags === void 0 ? getFromLocalStorage('showTags', true) : _ref$showTags,\n\t\t_ref$enabledTools = _ref.enabledTools,\n\t\tenabledTools =\n\t\t\t_ref$enabledTools === void 0\n\t\t\t\t? [\n\t\t\t\t\t\t'select',\n\t\t\t\t\t\t'create-point',\n\t\t\t\t\t\t'create-box',\n\t\t\t\t\t\t'create-polygon',\n\t\t\t\t\t\t'create-line',\n\t\t\t\t\t\t'create-expanding-line',\n\t\t\t\t\t\t'show-mask'\n\t\t\t\t\t]\n\t\t\t\t: _ref$enabledTools,\n\t\t_ref$selectedTool = _ref.selectedTool,\n\t\tselectedTool = _ref$selectedTool === void 0 ? 'select' : _ref$selectedTool,\n\t\t_ref$regionTagList = _ref.regionTagList,\n\t\tregionTagList = _ref$regionTagList === void 0 ? [] : _ref$regionTagList,\n\t\t_ref$regionClsList = _ref.regionClsList,\n\t\tregionClsList = _ref$regionClsList === void 0 ? [] : _ref$regionClsList,\n\t\t_ref$imageTagList = _ref.imageTagList,\n\t\timageTagList = _ref$imageTagList === void 0 ? [] : _ref$imageTagList,\n\t\t_ref$imageClsList = _ref.imageClsList,\n\t\timageClsList = _ref$imageClsList === void 0 ? [] : _ref$imageClsList,\n\t\t_ref$keyframes = _ref.keyframes,\n\t\tkeyframes = _ref$keyframes === void 0 ? {} : _ref$keyframes,\n\t\t_ref$taskDescription = _ref.taskDescription,\n\t\ttaskDescription = _ref$taskDescription === void 0 ? '' : _ref$taskDescription,\n\t\t_ref$fullImageSegment = _ref.fullImageSegmentationMode,\n\t\tfullImageSegmentationMode = _ref$fullImageSegment === void 0 ? false : _ref$fullImageSegment,\n\t\tRegionEditLabel = _ref.RegionEditLabel,\n\t\tvideoSrc = _ref.videoSrc,\n\t\t_ref$videoTime = _ref.videoTime,\n\t\tvideoTime = _ref$videoTime === void 0 ? 0 : _ref$videoTime,\n\t\tvideoName = _ref.videoName,\n\t\tonExit = _ref.onExit,\n\t\tonNextImage = _ref.onNextImage,\n\t\tonPrevImage = _ref.onPrevImage,\n\t\tkeypointDefinitions = _ref.keypointDefinitions,\n\t\t_ref$autoSegmentation = _ref.autoSegmentationOptions,\n\t\tautoSegmentationOptions =\n\t\t\t_ref$autoSegmentation === void 0\n\t\t\t\t? {\n\t\t\t\t\t\ttype: 'autoseg'\n\t\t\t\t\t}\n\t\t\t\t: _ref$autoSegmentation,\n\t\thideHeader = _ref.hideHeader,\n\t\thideHeaderText = _ref.hideHeaderText,\n\t\thideNext = _ref.hideNext,\n\t\thidePrev = _ref.hidePrev,\n\t\trightExtraItems = _ref.rightExtraItems,\n\t\tonCanvasImageLoadSuccess = _ref.onCanvasImageLoadSuccess,\n\t\tonCanvasImageLoadError = _ref.onCanvasImageLoadError,\n\t\tallowComments = _ref.allowComments,\n\t\tonStateUpdate = _ref.onStateUpdate,\n\t\tisEditable = _ref.isEditable != null ? _ref.isEditable : true;\n\n\tif (typeof selectedImage === 'string') {\n\t\tselectedImage = (images || []).findIndex(function(img) {\n\t\t\treturn img.src === selectedImage;\n\t\t});\n\t\tif (selectedImage === -1) selectedImage = undefined;\n\t}\n\n\tvar annotationType = images ? 'image' : 'video';\n\n\tvar _useReducer = useReducer(\n\t\t\thistoryHandler(combineReducers(annotationType === 'image' ? imageReducer : videoReducer, generalReducer)),\n\t\t\tmakeImmutable(\n\t\t\t\t_objectSpread(\n\t\t\t\t\t{\n\t\t\t\t\t\tannotationType: annotationType,\n\t\t\t\t\t\tshowTags: showTags,\n\t\t\t\t\t\tallowedArea: allowedArea,\n\t\t\t\t\t\tshowPointDistances: showPointDistances,\n\t\t\t\t\t\tpointDistancePrecision: pointDistancePrecision,\n\t\t\t\t\t\tselectedTool: selectedTool,\n\t\t\t\t\t\tfullImageSegmentationMode: fullImageSegmentationMode,\n\t\t\t\t\t\tautoSegmentationOptions: autoSegmentationOptions,\n\t\t\t\t\t\tmode: null,\n\t\t\t\t\t\ttaskDescription: taskDescription,\n\t\t\t\t\t\tshowMask: true,\n\t\t\t\t\t\tlabelImages: imageClsList.length > 0 || imageTagList.length > 0,\n\t\t\t\t\t\tregionClsList: regionClsList,\n\t\t\t\t\t\tregionTagList: regionTagList,\n\t\t\t\t\t\timageClsList: imageClsList,\n\t\t\t\t\t\timageTagList: imageTagList,\n\t\t\t\t\t\tcurrentVideoTime: videoTime,\n\t\t\t\t\t\tenabledTools: enabledTools,\n\t\t\t\t\t\thistory: [],\n\t\t\t\t\t\tvideoName: videoName,\n\t\t\t\t\t\tkeypointDefinitions: keypointDefinitions,\n\t\t\t\t\t\tallowComments: allowComments\n\t\t\t\t\t},\n\t\t\t\t\tannotationType === 'image'\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tselectedImage: selectedImage,\n\t\t\t\t\t\t\t\timages: images,\n\t\t\t\t\t\t\t\tselectedImageFrameTime: images && images.length > 0 ? images[0].frameTime : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tvideoSrc: videoSrc,\n\t\t\t\t\t\t\t\tkeyframes: keyframes\n\t\t\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t)\n\t\t),\n\t\t_useReducer2 = _slicedToArray(_useReducer, 2),\n\t\tstate = _useReducer2[0],\n\t\tdispatchToReducer = _useReducer2[1];\n\n\tvar dispatch = useEventCallback(function(action) {\n\t\tif (action.type === 'HEADER_BUTTON_CLICKED') {\n\t\t\tif ([ 'Exit', 'Done', 'Save', 'Complete' ].includes(action.buttonName)) {\n\t\t\t\treturn onExit(without(state, 'history'));\n\t\t\t} else if (action.buttonName === 'Next' && onNextImage) {\n\t\t\t\treturn onNextImage(without(state, 'history'));\n\t\t\t} else if (action.buttonName === 'Prev' && onPrevImage) {\n\t\t\t\treturn onPrevImage(without(state, 'history'));\n\t\t\t}\n\t\t}\n\n\t\tdispatchToReducer(action);\n\n\t\tif (onStateUpdate) {\n\t\t\tonStateUpdate(without(state, 'history'));\n\t\t}\n\t});\n\tvar onRegionClassAdded = useEventCallback(function(cls) {\n\t\tdispatchToReducer({\n\t\t\ttype: 'ON_CLS_ADDED',\n\t\t\tcls: cls\n\t\t});\n\n\t\tif (onStateUpdate) {\n\t\t\tonStateUpdate(without(state, 'history'));\n\t\t}\n\t});\n\tuseEffect(\n\t\tfunction() {\n\t\t\tif (selectedImage === undefined) return;\n\t\t\tdispatchToReducer({\n\t\t\t\ttype: 'SELECT_IMAGE',\n\t\t\t\timageIndex: selectedImage,\n\t\t\t\timage: state.images[selectedImage]\n\t\t\t});\n\t\t},\n\t\t[ selectedImage, state.images ]\n\t);\n\tif (!images && !videoSrc) return 'Missing required prop \"images\" or \"videoSrc\"';\n\treturn demo\n\t\t? React.createElement(DemoLayout, {\n\t\t\t\tRegionEditLabel: RegionEditLabel,\n\t\t\t\talwaysShowNextButton: Boolean(onNextImage),\n\t\t\t\talwaysShowPrevButton: Boolean(onPrevImage),\n\t\t\t\tstate: state,\n\t\t\t\tdispatch: dispatch,\n\t\t\t\tonRegionClassAdded: onRegionClassAdded,\n\t\t\t\thideHeader: hideHeader,\n\t\t\t\thideHeaderText: hideHeaderText,\n\t\t\t\thideNext: hideNext,\n\t\t\t\thidePrev: hidePrev,\n\t\t\t\trightExtraItems: rightExtraItems || [],\n\t\t\t\tonCanvasImageLoadSuccess: onCanvasImageLoadSuccess,\n\t\t\t\tonCanvasImageLoadError: onCanvasImageLoadError,\n\t\t\t\tisEditable: isEditable,\n\t\t\t})\n\t\t: React.createElement(\n\t\t\t\tJssProvider,\n\t\t\t\t{ generateClassName: generateClassName, jss: jss },\n\t\t\t\tReact.createElement(\n\t\t\t\t\tSettingsProvider,\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\tStylesProvider,\n\t\t\t\t\t\t{ injectFirst: true },\n\t\t\t\t\t\tReact.createElement(MainLayout, {\n\t\t\t\t\t\t\tRegionEditLabel: RegionEditLabel,\n\t\t\t\t\t\t\talwaysShowNextButton: Boolean(onNextImage),\n\t\t\t\t\t\t\talwaysShowPrevButton: Boolean(onPrevImage),\n\t\t\t\t\t\t\tstate: state,\n\t\t\t\t\t\t\tdispatch: dispatch,\n\t\t\t\t\t\t\tonRegionClassAdded: onRegionClassAdded,\n\t\t\t\t\t\t\thideHeader: hideHeader,\n\t\t\t\t\t\t\thideHeaderText: hideHeaderText,\n\t\t\t\t\t\t\thideNext: hideNext,\n\t\t\t\t\t\t\thidePrev: hidePrev,\n\t\t\t\t\t\t\trightExtraItems: rightExtraItems || [],\n\t\t\t\t\t\t\tonCanvasImageLoadSuccess: onCanvasImageLoadSuccess,\n\t\t\t\t\t\t\tonCanvasImageLoadError: onCanvasImageLoadError,\n\t\t\t\t\t\t\tisEditable: isEditable,\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n};\nexport default Annotator;\n"],"mappings":"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"}