{"version":3,"file":"index.js","names":["_objectSpread","_objectWithoutProperties","React","useRef","useCallback","makeStyles","styled","ImageCanvas","styles","useKey","useSettings","useFullScreenHandle","getActiveImage","useStyles","FullScreenContainer","width","height","DemoLayout","_ref2","state","dispatch","_ref2$alwaysShowNextB","alwaysShowNextButton","_ref2$alwaysShowPrevB","alwaysShowPrevButton","RegionEditLabel","onRegionClassAdded","hideHeader","hideHeaderText","_ref2$hideNext","hideNext","_ref2$hidePrev","hidePrev","rightExtraItems","isEditable","classes","settings","fullScreenHandle","memoizedActionFns","action","type","_len","arguments","length","params","Array","_key","fnKey","concat","join","current","fn","_len2","args","_key2","reduce","acc","p","i","_getActiveImage","currentImageIndex","activeImage","nextImage","images","detectKeys","canvas","createElement","Object","assign","showCrosshairs","includes","selectedTool","key","selectedImage","showMask","fullImageSegmentationMode","autoSegmentationOptions","showTags","allowedArea","modifyingAllowedArea","regionClsList","regionTagList","regions","realSize","undefined","videoPlaying","imageSrc","annotationType","src","videoSrc","pointDistancePrecision","createWithPrimary","dragWithPrimary","zoomWithPrimary","showPointDistances","videoTime","selectedImageFrameTime","currentVideoTime","keypointDefinitions","onMouseMove","onMouseDown","onMouseUp","onChangeRegion","onBeginRegionEdit","onCloseRegionEdit","onDeleteRegion","onBeginBoxTransform","onBeginMovePolygonPoint","onBeginMoveKeypoint","onAddPolygonPoint","onSelectRegion","onBeginMovePoint","onImageLoaded","onImageOrVideoLoaded","onChangeVideoTime","onChangeVideoPlaying","allowComments"],"sources":["../../src/DemoLayout/index.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/esm/objectSpread'\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties'\nimport React, { useRef, useCallback } from 'react'\nimport { makeStyles, styled } from '@material-ui/core/styles'\nimport ImageCanvas from '../ImageCanvas'\nimport styles from '../MainLayout/styles'\nimport useKey from 'use-key-hook'\nimport { useSettings } from '../SettingsProvider'\n\nimport { useFullScreenHandle } from 'react-full-screen'\nimport getActiveImage from '../Annotator/reducers/get-active-image'\n\nvar useStyles = makeStyles(styles)\nvar FullScreenContainer = styled('div')({\n\twidth: '100%',\n\theight: '100%',\n\t'& .fullscreen': {\n\t\twidth: '100%',\n\t\theight: '100%'\n\t}\n})\nexport var DemoLayout = function DemoLayout(_ref2) {\n\tvar state = _ref2.state,\n\t\tdispatch = _ref2.dispatch,\n\t\t_ref2$alwaysShowNextB = _ref2.alwaysShowNextButton,\n\t\talwaysShowNextButton = _ref2$alwaysShowNextB === void 0 ? false : _ref2$alwaysShowNextB,\n\t\t_ref2$alwaysShowPrevB = _ref2.alwaysShowPrevButton,\n\t\talwaysShowPrevButton = _ref2$alwaysShowPrevB === void 0 ? false : _ref2$alwaysShowPrevB,\n\t\tRegionEditLabel = _ref2.RegionEditLabel,\n\t\tonRegionClassAdded = _ref2.onRegionClassAdded,\n\t\thideHeader = _ref2.hideHeader,\n\t\thideHeaderText = _ref2.hideHeaderText,\n\t\t_ref2$hideNext = _ref2.hideNext,\n\t\thideNext = _ref2$hideNext === void 0 ? false : _ref2$hideNext,\n\t\t_ref2$hidePrev = _ref2.hidePrev,\n\t\thidePrev = _ref2$hidePrev === void 0 ? false : _ref2$hidePrev,\n\t\trightExtraItems = _ref2.rightExtraItems,\n\t\tisEditable = _ref2.isEditable\n\tvar classes = useStyles()\n\tvar settings = useSettings()\n\tvar fullScreenHandle = useFullScreenHandle()\n\tvar memoizedActionFns = useRef({})\n\n\tvar action = function action(type) {\n\t\tfor (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\tparams[_key - 1] = arguments[_key]\n\t\t}\n\n\t\tvar fnKey = ''.concat(type, '(').concat(params.join(','), ')')\n\t\tif (memoizedActionFns.current[fnKey]) return memoizedActionFns.current[fnKey]\n\n\t\tvar fn = function fn() {\n\t\t\tfor (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\targs[_key2] = arguments[_key2]\n\t\t\t}\n\n\t\t\treturn params.length > 0 ? dispatch(_objectSpread({\n\t\t\t\ttype: type\n\t\t\t}, params.reduce(function (acc, p, i) {\n\t\t\t\treturn acc[p] = args[i], acc\n\t\t\t}, {}))) : dispatch(_objectSpread({\n\t\t\t\ttype: type\n\t\t\t}, args[0]))\n\t\t}\n\n\t\tmemoizedActionFns.current[fnKey] = fn\n\t\treturn fn\n\t}\n\n\tvar _getActiveImage = getActiveImage(state),\n\t\tcurrentImageIndex = _getActiveImage.currentImageIndex,\n\t\tactiveImage = _getActiveImage.activeImage\n\n\tvar nextImage\n\n\tif (currentImageIndex !== null) {\n\t\tnextImage = state.images[currentImageIndex + 1]\n\t}\n\n\tuseKey(function () {\n\t\treturn dispatch({\n\t\t\ttype: 'CANCEL'\n\t\t})\n\t}, {\n\t\tdetectKeys: [27]\n\t})\n    \n\tvar canvas = React.createElement(ImageCanvas, Object.assign({}, settings, {\n\t\tshowCrosshairs: settings.showCrosshairs && !['select', 'pan', 'zoom'].includes(state.selectedTool),\n\t\tkey: state.selectedImage,\n\t\tshowMask: state.showMask,\n\t\tfullImageSegmentationMode: state.fullImageSegmentationMode,\n\t\tautoSegmentationOptions: state.autoSegmentationOptions,\n\t\tshowTags: state.showTags,\n\t\tallowedArea: state.allowedArea,\n\t\tmodifyingAllowedArea: state.selectedTool === 'modify-allowed-area',\n\t\tregionClsList: state.regionClsList,\n\t\tregionTagList: state.regionTagList,\n\t\tregions: activeImage.regions || [],\n\t\trealSize: activeImage ? activeImage.realSize : undefined,\n\t\tvideoPlaying: state.videoPlaying,\n\t\timageSrc: state.annotationType === 'image' ? activeImage.src : null,\n\t\tvideoSrc: state.annotationType === 'video' ? state.videoSrc : null,\n\t\tpointDistancePrecision: state.pointDistancePrecision,\n\t\tcreateWithPrimary: state.selectedTool.includes('create'),\n\t\tdragWithPrimary: state.selectedTool === 'pan',\n\t\tzoomWithPrimary: state.selectedTool === 'zoom',\n\t\tshowPointDistances: state.showPointDistances,\n\t\tvideoTime: state.annotationType === 'image' ? state.selectedImageFrameTime : state.currentVideoTime,\n\t\tkeypointDefinitions: state.keypointDefinitions,\n\t\tonMouseMove: action('MOUSE_MOVE'),\n\t\tonMouseDown: action('MOUSE_DOWN'),\n\t\tonMouseUp: action('MOUSE_UP'),\n\t\tonChangeRegion: action('CHANGE_REGION', 'region'),\n\t\tonBeginRegionEdit: action('OPEN_REGION_EDITOR', 'region'),\n\t\tonCloseRegionEdit: action('CLOSE_REGION_EDITOR', 'region'),\n\t\tonDeleteRegion: action('DELETE_REGION', 'region'),\n\t\tonBeginBoxTransform: action('BEGIN_BOX_TRANSFORM', 'box', 'directions'),\n\t\tonBeginMovePolygonPoint: action('BEGIN_MOVE_POLYGON_POINT', 'polygon', 'pointIndex'),\n\t\tonBeginMoveKeypoint: action('BEGIN_MOVE_KEYPOINT', 'region', 'keypointId'),\n\t\tonAddPolygonPoint: action('ADD_POLYGON_POINT', 'polygon', 'point', 'pointIndex'),\n\t\tonSelectRegion: action('SELECT_REGION', 'region'),\n\t\tonBeginMovePoint: action('BEGIN_MOVE_POINT', 'point'),\n\t\tonImageLoaded: action('IMAGE_LOADED', 'image'),\n\t\tRegionEditLabel: RegionEditLabel,\n\t\tonImageOrVideoLoaded: action('IMAGE_OR_VIDEO_LOADED', 'metadata'),\n\t\tonChangeVideoTime: action('CHANGE_VIDEO_TIME', 'newTime'),\n\t\tonChangeVideoPlaying: action('CHANGE_VIDEO_PLAYING', 'isPlaying'),\n\t\tonRegionClassAdded: onRegionClassAdded,\n\t\tallowComments: state.allowComments,\n\t\tisEditable: isEditable\n\t}))\n    \n\treturn React.createElement(FullScreenContainer, null, canvas)\n}\nexport default DemoLayout"],"mappings":"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"}